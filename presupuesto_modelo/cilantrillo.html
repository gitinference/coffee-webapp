<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nómina Semanal - Agricultores</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    input, select { width: 95%; padding: 4px; }

    td:first-child,
    th:first-child{
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>Nómina Semanal - Registro de Horas<sup style="font-size: 0.1em;">K11</sup></h1>

  <table>
    <tbody id="tabla">
      <!-- Filas generadas por JS -->
    </tbody>

    <tfoot>
      <tr>
        <td colspan="6" style="padding: 20px; background-color: #ffffff; line-height: 1.6;">

          <h2 style="color: #000000; font-size: 1em">Supuestos</h2>
          <ol style="padding-left: 20px;">
            <li>El costo de construir el vivero 40x100 se estima en $37,000. Esto incluye todo el equipo necesario para comenzar la siembra y el adiestramiento para su uso. Estas instalaciones pueden ser financiadas atraves de un programa gubernamental o agencia federal. La vida útil del mismo es de aproximadamente 25 años.</li>
            <li>Una cosecha puede tomar entre 23-27 días</li>
            <li>En un Umbraculo de 100x40 hay 5 mesas(bancos) y cada mesa cuenta con 3,500 huecos/mazo para un total de 17,500. Se adjudica el 15% de pérdidas de producción para un total de 14,875 mazos. Cada mesa mide 5 pies de ancho.</li>
            <li>Supervisar que todo el sistema esté funcionando correctamente, verificar pH., mangas, tanques, etc. Se recomienda realizar tres veces al día. Diariamente 30 minutos x 27 días = 13.5 horas por ciclo</li>
            <li>Limpiezas de tubos y tanques. Tres horas semanales por 4 semanas.</li>
            <li>Todas la semanas una hora.</li>
            <li>Se estima que se realiza en media hora por banco, por semana. Dos horas por banco.</li>
            <li>Seis horas semanales. Incluye la cosecha, la limpieza del mazo y empaque.</li>
            <li>Una hora y treinta minutos semanales, no se aplica todos los días.</li>
            <li>Abono 11-11-40 hidropónico</li>
            <li>Franquicia/pozo</li>
            <li>25% del gasto en mano de obra</li>
            <li>Gasto mensual, pero puede variar dependiendo de la eficiencia de la bomba de agua y del arreglo de tubos que el agriculto utilize.</li>
            <li>Depreciación promedio, se utilizó depreciación por línea recta para el costo de la estructura y equipos</li>
            <li>No se tomó en consideración el subsidio salarial, si se aplicara el subsidio el ingreso neto aumentaría. Se proveyó encasillado para que coloque el valor del subsidio.</li>
          </ol>

          <span style="font-weight: bold;">Revisado por:</span><br>
          Profa. Mildred Cortes<br>
          Catedrática, Departamento de Economía Agrícola y Sociología Rural<br><br>

          Dra. Ermita Hernández<br>
          Catedrática Auxiliar, Departamento de Ciencias Agroambientales<br><br>

          Dra. Alexandra Gregory Crespo<br>
          Catedrática Asociada, Departamento de Economía Agrícola y Sociología Rural<br><br>

          Prof. Raúl Pérez<br>
          Agente Agrícola, Florida y Barceloneta<br><br>

          Prof. Carlos Gautier<br>
          Agente Agrícola, Humacao<br><br>

          Yasmín del Río Ríos<br>
          Estudiante Graduada Departamento de Economía Agrícola y Sociología Rural<br><br>

          Roberto Sánchez Silva<br>
          M.S. Departamento de Economía Agrícola y Sociología Rural<br><br>



    
          <span style="font-weight: bold;">Fecha de revisión:</span><br>
          Junio 2025<br><br>
    
          <div style="margin-top: 20px; padding: 12px; border-left: 5px solid #d9534f; background-color: #fdf2f2;">
            <strong>AVISO:</strong> Los Presupuestos Modelos presentan la información de los ingresos y gastos bajo condiciones normales y características particulares de una finca.  La Universidad de Puerto Rico no asume responsabilidad por los resultados si los ingresos y gastos de una empresa en particular difieren de dicha publicación. El usuario de estos modelos releva a la Universidad de Puerto Rico de toda responsabilidad, reclamación, pérdida, daño o costo relacionado o surgido por el uso de estos modelos.
          </div>
    
          <div style="margin-top: 20px; font-size: 0.85em; text-align: center; color: #999;">
            This material is based upon work supported by USDA/OPPE under Award Number: AO212501x443G010
          </div>
        </td>
      </tr>
    </tfoot>

    
  </table>
<!----------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------->
  <script>

   //variables globales
   let NUMERO_UMBRACULOS = 0;
   let NUMERO_COSECHAS = 0;
   let RENDIMIENTO_PORCENTAJE = 0;
   let RENDIMIENTO_LIBRAS = 0; 
   let SUBTOTAL_MANO_DE_OBRA = 0;
   let SUBTOTAL_GASTOS_OPERACIONALES = 0;
   let TOTAL_GASTOS = 0;
   let INGRESO_BRUTO = 0; 
   let INGRESO_NETO = 0;
   let COSTO_CLANTRILLO = 0;
   let CANTIDAD_CILANTRILLO = 0;

   const tabla = document.getElementById("tabla")

//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------

   //tabla 1
   
   const fila_inputs = [
    ["Número de Umbráculos, umbráculo de 100x40 [1]", "t1-numero-umbraculos"],
    ["Número de cosechas[2]", "t1-numero-cosechas"],
    ['Número de Plantas (para una cosecha y un umbráculo) a una distancia de 6"x 6", 5 bancos: 3,500 x 5 [3]', "t1-numero-plantas"],
    ["Rendimiento 85% (coloque en decimales)", "t1-rendimiento-porcentaje"],
    ["Número de Plantas por Mazo", "t1-plantas_mazo"],
    ["Número de Mazos por libra", "numero-mazos"],
   ]

   fila_inputs.forEach((item, index) => {
    const fila = document.createElement("tr");

    fila.innerHTML = `
        <!--Titulo de item-->
        <td colspan="4">${item[0]}</td>
        <!--Input-->
        <td colspan="1"><input type="number" min="0" step="1" id=${item[1]} oninput="calcular_rendimiento_libras(); calcular_valor_mano(${index}); calcular_valor_t3(${index}); calcular_valor_t4(${index}); t5_num_umbraculos(); t5_num_cosechas();"></td>
    `;
    tabla.appendChild(fila)
   });

   document.querySelectorAll('[id^="t1-"]').forEach(input => {
    input.addEventListener('input', ()=>{
        calcular_rendimiento_libras();
       })
   })

   document.querySelectorAll('[id^="t1-numero-umbraculos"]').forEach(input=>{
      input.addEventListener('input', ()=>{
      for (let i = 0; i<partidas_t2.length;i++){
            calcular_valor_mano(i);
        }
        for (let i=0; i<partidas_t3.length; i++){
            calcular_valor_t3(i);
        }
        for (let i=0; i<partidas_t4.length; i++){
            calcular_valor_t4(i);
        }
        t5_num_umbraculos();
        t5_num_cosechas();
      })
   })

   document.querySelectorAll('[id^="t1-numero-cosechas"]').forEach(input=>{
      input.addEventListener('input', ()=>{
      for (let i = 0; i<partidas_t2.length;i++){
            calcular_valor_mano(i);
        }
        for (let i=0; i<partidas_t3.length; i++){
            calcular_valor_t3(i);
        }
        for (let i=0; i<partidas_t4.length; i++){
            calcular_valor_t4(i);
        }
        t5_num_umbraculos();
        t5_num_cosechas();
      })
   })

   const fila_rendimiento_por_libras = document.createElement("tr")
   fila_rendimiento_por_libras.innerHTML = `
    <th colspan="4">Rendimiento en libras: cada <strong>Mazo</strong> tiene 2 plantas, cada <strong>Mazo</strong> tiene alrededor de 5-6 oz mazo, cada 3 mazos es una libra</th>
    <th id="resultado-rendimiento-libras" colspan="1">0.00</th>
   `;
   tabla.appendChild(fila_rendimiento_por_libras)


   function calcular_rendimiento_libras(){

    const num_plantas = parseFloat(document.getElementById("t1-numero-plantas").value) || 0;
    RENDIMIENTO_PORCENTAJE = parseFloat(document.getElementById("t1-rendimiento-porcentaje").value) || 0;
    const num_plantas_mazo = parseFloat(document.getElementById("t1-plantas_mazo").value) || 0;
    const num_mazos = parseFloat(document.getElementById("numero-mazos").value) || 0;
    NUMERO_UMBRACULOS = parseFloat(document.getElementById("t1-numero-umbraculos").value) || 0;
    NUMERO_COSECHAS = parseFloat(document.getElementById("t1-numero-cosechas").value) || 0;

    //son denominadores en la funcion
    if (num_plantas_mazo === 0 || num_mazos === 0) {
    document.getElementById("resultado-rendimiento-libras").textContent = "0.00";
    return;
  }
    RENDIMIENTO_LIBRAS = (((num_plantas*RENDIMIENTO_PORCENTAJE)/num_plantas_mazo)/num_mazos)*NUMERO_UMBRACULOS*NUMERO_COSECHAS;
    document.getElementById("resultado-rendimiento-libras").textContent = RENDIMIENTO_LIBRAS.toFixed(2);
    document.getElementById("t4-venta-cilantrillo").textContent = RENDIMIENTO_LIBRAS.toFixed(2);
    t5_precio_minimo();
    t5_produccion_minima()

   }


   const filaVacía_1 = document.createElement("tr");
    filaVacía_1.innerHTML = `<td colspan="5" style="height: 20px; background-color: transparent;"></td>`;
      tabla.appendChild(filaVacía_1);

//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------
    
   //tabla 2
   const t2_titulo1 = document.createElement("tr")
   t2_titulo1.innerHTML =  `
        <th colspan="5" style="text-align: center; background-color: #cccccc;">
            Presupuesto para la Siembra de Cilantrillo en Hidropónico vivero 40x100 [1]
        </th>
   `;
   tabla.appendChild(t2_titulo1);

   const t2_titulo2 = document.createElement("tr")
   t2_titulo2.innerHTML = `
        <th colspan="5" style="text-align: center; background-color: #cccccc;">
            Proyección por una cosecha (se puede producir 11 cosechas al año)
        </th>
   `;
   tabla.appendChild(t2_titulo2);

   const columnas = document.createElement("tr")
   columnas.innerHTML = `
        <th>Partida</th>
        <th>Unidad</th>
        <th>Cantidad</th>
        <th>Costo</th>
        <th>Valor $</th>
   `;
   tabla.appendChild(columnas)

   const mano_de_obra = document.createElement("tr")
   mano_de_obra.innerHTML = `<th colspan="5" style="text-align: center; background-color: #cccccc;">Mano de Obra</th>`;
   tabla.appendChild(mano_de_obra);

   const partidas_t2 = [
        "Supervisión de Sistema [4]",
        "Limpieza [5]",
        "Preparación de Semillero [6]",
        "Siembra [7]",
        "Cosecha[8]",
        "Preparación de Formula [9]",
        "Entrega"
   ]

   partidas_t2.forEach((trabajo, index)=>{
        const fila = document.createElement("tr")
        fila.innerHTML = `
            <!--Trabajo-->
            <td>${trabajo}</th>
            <!--Unidad-->
            <td>Horas</td>
            <!--Cantidad-->
            <td><input type="number" min="0" step="1" id="t2-cantidad-${index}" oninput="calcular_valor_mano(${index})"></td>
            <!--Costo-->
            <td><input type="number" min="0" step="1" id="t2-costo-${index}" oninput="calcular_valor_mano(${index})"></td>
            <!--Valor-->
            <td id="t2-valor-${index}" data-valor="0">$0.00</td>
        `;
        tabla.appendChild(fila);
   });

   document.querySelectorAll('[id^="t2-"]').forEach((input, index)=>{
        input.addEventListener('input', ()=>{
            calcular_valor_mano(index)
        });
   });

   const subtotal_mano = document.createElement("tr")
   subtotal_mano.innerHTML = `
        <th colspan="4">Subtotal Mano de Obra</th>
        <th id="subtotal-t2">$0.00</th>
   `;
   tabla.appendChild(subtotal_mano)

   

   function calcular_valor_mano(index) {
        const cantidad_t2 = parseFloat(document.getElementById(`t2-cantidad-${index}`).value) || 0;
        const costo_t2 = parseFloat(document.getElementById(`t2-costo-${index}`).value) || 0;
        const valor_t2 = cantidad_t2 * costo_t2 * NUMERO_COSECHAS * NUMERO_UMBRACULOS;
        const cell = document.getElementById(`t2-valor-${index}`)
        cell.dataset.valor = valor_t2;
        cell.textContent = "$" + valor_t2.toFixed(2);

        calcular_subtotal_t2();
   }

   function calcular_subtotal_t2(){
        SUBTOTAL_MANO_DE_OBRA = 0;
        for (let i = 0; i < partidas_t2.length;i++){
            const valor = parseFloat(document.getElementById(`t2-valor-${i}`).dataset.valor) || 0;
            SUBTOTAL_MANO_DE_OBRA += valor;
        }
        document.getElementById("subtotal-t2").textContent = "$" + SUBTOTAL_MANO_DE_OBRA.toFixed(2)
        calcular_gastos_totales()
        calcular_valor_t3(7);
        calcular_valor_t3(16);
   }

//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------

   //tabla 3
   const gastos_operacionales = document.createElement("tr")
   gastos_operacionales.innerHTML = `<th colspan="5" style="text-align: center; background-color: #cccccc;">Gastos Operacionales</th>`;
   tabla.appendChild(gastos_operacionales);

   const partidas_t3 = [
    ["Semillas", "Libra", -1, -1],
    ["Abono[10]", "Saco 25lbs", -1,-1],
    ["Nitrato de Calcio", "50lbs", -1,-1],
    ["Sulfato de magnesio", "50lbs", -1,-1],
    ["Control de Plagas y manejo de yerbajos", "", "", ""],
    ["Oasis", "Cajas", -1,-1],
    ["Agua [11]", "","", -1],
    ["Obligaciones Patronales [12]", "", "", ""],
    ["Electricidad [13]", "","",-1],
    ["Fundas Plásticas", "Cajas", -1, -1],
    ["Cajas Empaque", "c/u", -1, -1],
    ["Detergentes", "", "", -1],
    ["Misceláneos", "","",-1],
    ["Mantenimiento y reparación", "", "", -1],
    ["Depreciación Promedio Estructura Annual [14]", "","",-1],
    ["Seguros", "","",-1],
    ["Administración, supervisión e imprevistos (10% de la nómina)", "","",""],
    ["Interés sobre gastos (9%)", "","",""],
    ["Entrega (180 millas por 2 viajes por $0.40)", "","",-1]
   ]

   partidas_t3.forEach((partida, index)=>{
        const fila = document.createElement("tr");
        
        let cantidad_html = "";
        let costo_html = "";
        if (partida[2]===-1){
          cantidad_html = `<input type="number" min="0" step="1" id="t3-cantidad-${index}" oninput="calcular_valor_t3(${index})">`
        }
        if (partida[3]===-1){
          costo_html = `<input type="number" min="0" step="1" id="t3-costo-${index}" oninput="calcular_valor_t3(${index})">`
        }
        
        fila.innerHTML =  `
          <!--Partida-->
          <td>${partida[0]}</td>
          <!--Unidad-->
          <td>${partida[1]}</td>
          <!--Cantidad-->
          <td>${cantidad_html}</td>
          <!--Costo-->
          <td>${costo_html}</td>
          <!--Valor-->
          <td id="t3-valor-${index}">$0.00</td>
        `;
        tabla.appendChild(fila);
   });

   document.querySelectorAll('input[id^="t3-cantidad-"]').forEach(input => {
      const index = parseInt(input.id.split('-').pop());
      input.addEventListener('input', () => {
        calcular_valor_t3(index); // ✅ now index is guaranteed correct
      });
    });

    document.querySelectorAll('input[id^="t3-costo-"]').forEach(input => {
      const index = parseInt(input.id.split('-').pop());
      input.addEventListener('input', () => {
        calcular_valor_t3(index);
      });
    });

   const fila_subtotal_t3 = document.createElement("tr");
   fila_subtotal_t3.innerHTML = `
    <th colspan="4">Subtotal Gastos Operacionales</th>
    <th colspan="1" id="subtotal-gastos-operacionales">$0.00</th>
   `;
   tabla.appendChild(fila_subtotal_t3);

   function calcular_valor_t3(index){
      let cantidad_t3 = 0;
      let costo_t3 = 0;
      let valor_t3 = 0;
      //si hay input de cantidad y costo
      if (partidas_t3[index][2]===-1 && partidas_t3[index][3]===-1){
        cantidad_t3 = parseFloat(document.getElementById(`t3-cantidad-${index}`).value) || 0;
        costo_t3 = parseFloat(document.getElementById(`t3-costo-${index}`).value) || 0;
        valor_t3 = cantidad_t3*costo_t3*NUMERO_COSECHAS*NUMERO_UMBRACULOS;
      }
      //si hay input de costo
      else if(partidas_t3[index][3]===-1){
        costo_t3 = parseFloat(document.getElementById(`t3-costo-${index}`).value) || 0;
        valor_t3 = costo_t3*NUMERO_COSECHAS*NUMERO_UMBRACULOS;
      }

      //Control de Plagas y Manjeo de Yerbajos
      if (index===4){
        valor_t3 = 40*NUMERO_COSECHAS*NUMERO_UMBRACULOS;
      }
      //Obligaciones Patronales
      else if(index===7){
        valor_t3 = SUBTOTAL_MANO_DE_OBRA*0.2;
      }
      //Administración, supervisión e imprevistos (10% de la nómina)
      else if (index === 16){
        valor_t3 = SUBTOTAL_MANO_DE_OBRA*0.1;
      }
      //Interés sobre gastos (9%)
      else if (index === 17){
        valor_t3 = 2489.26*0.09*NUMERO_COSECHAS*NUMERO_UMBRACULOS;
      }


      const cell = document.getElementById(`t3-valor-${index}`);
        if (cell) {
        cell.dataset.valor = valor_t3 || 0;
        cell.textContent = "$" + valor_t3.toFixed(2);
        }

      calcular_subtotal_t3();
   };

   //ERROR AQUI CREOOOOO
   function calcular_subtotal_t3(){
      SUBTOTAL_GASTOS_OPERACIONALES = 0;
      for (let i = 0; i < partidas_t3.length;i++){
          const valor = parseFloat(document.getElementById(`t3-valor-${i}`).dataset.valor) || 0;
          SUBTOTAL_GASTOS_OPERACIONALES += valor;
      }
      document.getElementById("subtotal-gastos-operacionales").textContent = "$" + SUBTOTAL_GASTOS_OPERACIONALES.toFixed(2)
      calcular_gastos_totales();
   }
   

//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------

   //TOTAL DE GASTOS
   const total_gastos = document.createElement("tr");
   total_gastos.innerHTML = `
      <th colspan="4">TOTAL DE GASTOS</th>
      <th colspan="1" id="total-gastos">$0.00</th>
   `;
   tabla.appendChild(total_gastos)

   function calcular_gastos_totales(){
      TOTAL_GASTOS = SUBTOTAL_GASTOS_OPERACIONALES+SUBTOTAL_MANO_DE_OBRA
      document.getElementById("total-gastos").textContent = "$" + TOTAL_GASTOS.toFixed(2);
      calcular_ingreso_neto();
      t5_gasto_total();
      t5_produccion_minima();
      t5_precio_minimo();
   }


//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------

   //tabla 4
   const ingreso_bruto = document.createElement("tr")
   ingreso_bruto.innerHTML = `<th colspan="5" style="text-align: center; background-color: #cccccc;">Ingreso Bruto</th>`;
   tabla.appendChild(ingreso_bruto);

   const partidas_t4 = [
      ["Venta de Cilantrillo [2]", "Libras/Cosecha", "t4-venta-cilantrillo"],
      ["Subsidio salarial [15]", "", "t4-subsidio"]
   ];

   partidas_t4.forEach((partida, index)=>{
      const fila = document.createElement("tr");

      fila.innerHTML = `
        <!--Partida-->
        <td>${partida[0]}</td>
        <!--Unidad-->
        <td>${partida[1]}</td>
        <!--Cantidad-->
        <td id=${partida[2]}></td>
        <!--Costo-->
        <td><input type="number" min="0" step="1" id="t4-costo-${index}" oninput="calcular_valor_t4(${index}); t5_produccion_minima()"></td>
        <!--Valor-->
        <td id="t4-valor-${index}">$0.00</td>
      `;
      tabla.appendChild(fila);
   })

   document.querySelectorAll('input[id^="t4-costo-"]').forEach(input => {
      const index = parseInt(input.id.split("-").pop());

      input.addEventListener('input', () => {
      calcular_valor_t4(index);
      t5_produccion_minima();
      t5_precio_minimo();
      });
    });


   const fila_ingreso_bruto = document.createElement("tr");
   fila_ingreso_bruto.innerHTML = `
      <th colspan="4">INGRESO BRUTO</th>
      <th id="ingreso-bruto">$0.00</th
   `;
   tabla.appendChild(fila_ingreso_bruto);

   const fila_ingreso_neto = document.createElement("tr");
   fila_ingreso_neto.innerHTML = `
      <th colspan="4">INGRESO NETO</th>
      <th id="ingreso-neto">$0.00</th
   `;
   tabla.appendChild(fila_ingreso_neto);

   function calcular_valor_t4(index){
    let valor_t4 = 0;
    let costo = 0;
    //Venta de Cilantrillo
    if (index === 0){
      costo = parseFloat(document.getElementById(`t4-costo-${index}`).value) || 0;
      valor_t4 = costo*RENDIMIENTO_LIBRAS;
    }
    //Subsidio Salarial
    else if (index=== 1){
      costo = parseFloat(document.getElementById(`t4-costo-${index}`).value) || 0;
      valor_t4 = costo*NUMERO_COSECHAS*NUMERO_UMBRACULOS
    }
    const cell = document.getElementById(`t4-valor-${index}`);
    cell.dataset.valor = valor_t4;
    cell.textContent = "$" + valor_t4.toFixed(2);

    calcular_ingreso_bruto();
   }

   function calcular_ingreso_bruto(){
      INGRESO_BRUTO = 0;
      for (let i = 0; i < partidas_t4.length;i++){
        const valor = parseFloat(document.getElementById(`t4-valor-${i}`).dataset.valor) || 0;
        INGRESO_BRUTO += valor;
        }
      document.getElementById("ingreso-bruto").textContent = "$" + INGRESO_BRUTO.toFixed(2);
      calcular_ingreso_neto();
      t5_ingreso_bruto();
   }

   function calcular_ingreso_neto(){
      INGRESO_NETO = INGRESO_BRUTO-TOTAL_GASTOS;
      document.getElementById("ingreso-neto").textContent = "$" + INGRESO_NETO.toFixed(2);
      t5_ingreso_neto();
   }

   const filaVacía_2 = document.createElement("tr");
   filaVacía_2.innerHTML = `<td colspan="5" style="height: 20px; background-color: transparent;"></td>`;
   tabla.appendChild(filaVacía_2);

//-----------------------------------------------------------------------------------------------------------------------------------------------------  
//-----------------------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------------------


   //tabla5
   const tabla5 = document.createElement("tr");
   tabla5.innerHTML = `
      <th colspan="3">PARTIDA</th>
      <th>VALOR</th>
      <th>MI FINCA</th>
   `;
   tabla.appendChild(tabla5);

   const partidas_t5 = [
      ["Número de Umbráculos", "t5-numero-umbraculos", "mifinca-umbraculos"],
      ["Número de Cosechas", "t5-numero-cosechas", "mifinca-cosechas"],
      ["Ingreso Bruto", "t5-ingreso-bruto", "mifinca-ingreso-bruto"],
      ["Gasto Total", "t5-gasto-total", "mifinca-gasto-total"],
      ["Ingreso Neto", "t5-ingreso-neto", "mifinca-ingreso-neto"],
      ["Precio Mínimo de Venta por libra (Precio mínimo para cubrir costos, break even, Mi Finca presenta la ganacia/pérdida por libra)", "t5-precio-minimo", "mifinca-precio-minimo"],
      ["Producción Mínima en libras (Producción mínima para cubrir mis costos, Mi Finca presenta la cantidad que puedo vender para obtener ganancias sino perdí nada de mi producción)", "t5-produccion-minima", "mifinca-produccion-minima"]
   ]

   partidas_t5.forEach((partida, index)=>{
      const fila = document.createElement("tr")

      fila.innerHTML = `
        <!--Partida-->
        <td colspan="3">${partida[0]}</th>
        <!--Valor-->
        <td id=${partida[1]}
        <!--Mi finca-->
        <td id=${partida[2]}></td>
      `;
      tabla.appendChild(fila);
   })

   function t5_num_umbraculos(){
      const cell = document.getElementById("t5-numero-umbraculos")
      cell.dataset.valor = NUMERO_UMBRACULOS;
      cell.textContent = NUMERO_UMBRACULOS

      const cell2 = document.getElementById("mifinca-umbraculos")
      cell2.dataset.valor = NUMERO_UMBRACULOS;
      cell2.textContent = NUMERO_UMBRACULOS;

      t5_ingreso_bruto();
   }

   function t5_num_cosechas(){
      const cell = document.getElementById("t5-numero-cosechas")
      cell.dataset.valor = NUMERO_COSECHAS;
      cell.textContent = NUMERO_COSECHAS;

      const cell2 = document.getElementById("mifinca-cosechas")
      cell2.dataset.valor = NUMERO_COSECHAS;
      cell2.textContent = NUMERO_COSECHAS;

      t5_ingreso_bruto();
      t5_gasto_total();
       t5_ingreso_neto();
   }

   function t5_ingreso_bruto(){
      const cell = document.getElementById("t5-ingreso-bruto")
      cell.dataset.valor = INGRESO_BRUTO;
      cell.textContent = INGRESO_BRUTO.toFixed(2);

      const cell2 = document.getElementById("mifinca-ingreso-bruto")
      const resultado = INGRESO_BRUTO-(7437.5*NUMERO_COSECHAS*NUMERO_UMBRACULOS);
      cell2.dataset.valor = resultado;
      cell2.textContent = "$" + resultado.toFixed(2);

   }

   function t5_gasto_total(){
      const cell = document.getElementById("t5-gasto-total")
      cell.dataset.valor = TOTAL_GASTOS;
      cell.textContent = "$" + TOTAL_GASTOS.toFixed(2);

      const cell2 = document.getElementById("mifinca-gasto-total")
      const resultado = TOTAL_GASTOS-(2507.76*NUMERO_COSECHAS*NUMERO_UMBRACULOS)
      cell2.dataset.valor= resultado;
      cell2.textContent = "$" + resultado.toFixed(2);
   }

   function t5_ingreso_neto(){
      const cell = document.getElementById("t5-ingreso-neto")
      cell.dataset.valor = INGRESO_NETO;
      cell.textContent = "$" + INGRESO_NETO.toFixed(2);

      const cell2 = document.getElementById("mifinca-ingreso-neto")
      const resultado = INGRESO_NETO-(4929.74*NUMERO_COSECHAS*NUMERO_UMBRACULOS)
      cell2.dataset.valor = resultado;
      cell2.textContent = "$" + resultado;
   }

   function t5_produccion_minima(){
      let produccion = 0;
      const venta_cilantrillo = parseFloat(document.getElementById("t4-costo-0").value) || 0;
      if (venta_cilantrillo != 0){
        produccion = TOTAL_GASTOS/venta_cilantrillo;
      }

      const cell = document.getElementById("t5-produccion-minima")
      cell.dataset.valor = produccion;
      cell.textContent = produccion.toFixed(2);


      const cell2 = document.getElementById("mifinca-produccion-minima")
      const resultado = RENDIMIENTO_LIBRAS-produccion;
      cell2.dataset.valor = resultado;
      cell2.textContent = resultado.toFixed(2);
   }

   function t5_precio_minimo(){
      let precio = 0
      if (RENDIMIENTO_LIBRAS !== 0){
        precio = TOTAL_GASTOS/RENDIMIENTO_LIBRAS;
      }

      const cell = document.getElementById("t5-precio-minimo")
      cell.dataset.valor = precio;
      cell.textContent = "$" + precio.toFixed(2);

      const cell2 = document.getElementById("mifinca-precio-minimo")
      const venta_cilantrillo = parseFloat(document.getElementById("t4-costo-0").value) || 0;
      const resultado = venta_cilantrillo-precio;
      cell2.dataset.valor = resultado;
      cell2.textContent = "$" + resultado.toFixed(2);
      
   }



   



  </script>
</body>
</html>



